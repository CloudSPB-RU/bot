# Инструкция по настройке бота

## 1. Настройка бота для проверки подписки

### Шаг 1: Добавьте бота в канал как администратора

1. Перейдите в ваш канал @CloudSPBru
2. Нажмите на название канала → "Управление каналом"
3. Выберите "Администраторы" → "Добавить администратора"
4. Найдите вашего бота по username и добавьте его
5. **ВАЖНО**: Дайте боту права "Добавлять участников" и "Удалять участников"

### Шаг 2: Проверьте права бота

Бот должен иметь следующие права в канале:
- ✅ Читать сообщения
- ✅ Добавлять участников  
- ✅ Удалять участников
- ✅ Просматривать информацию о канале

### Шаг 3: Проверьте настройки канала

Убедитесь, что:
- Канал публичный (имеет username)
- Бот может видеть участников канала
- В канале включены права на просмотр участников

## 2. Настройка переменных окружения

Создайте файл `.env` в корне проекта:

```env
# Telegram Bot Token (получите у @BotFather)
BOT_TOKEN=your_bot_token_here

# Pterodactyl API (получите в панели Pterodactyl)
PTERODACTYL_TOKEN=your_pterodactyl_token_here
PTERODACTYL_URL=https://panel.cloudspb.ru

# Telegram Channel (ваш канал)
CHANNEL_USERNAME=@CloudSPBru

# Admin IDs (ваши Telegram ID через запятую)
ADMIN_IDS=123456789,987654321
```

## 3. Получение токенов

### Telegram Bot Token:
1. Напишите @BotFather в Telegram
2. Отправьте `/newbot`
3. Следуйте инструкциям
4. Скопируйте полученный токен

### Pterodactyl API Token:
1. Войдите в панель Pterodactyl как администратор
2. Перейдите в Settings → API Credentials
3. Создайте новый API ключ
4. Выберите права: Server Creation, Server Management, User Management
5. Скопируйте полученный токен

### Ваш Telegram ID:
1. Напишите @userinfobot в Telegram
2. Скопируйте ваш ID

## 4. Проверка работы

После настройки:

1. Запустите бота: `python bot.py`
2. Напишите боту `/start`
3. Проверьте, что бот видит подписку на канал
4. Протестируйте создание сервера

## 5. Устранение проблем

### Бот не видит подписку:
- Убедитесь, что бот добавлен в канал как администратор
- Проверьте права бота в канале
- Убедитесь, что канал публичный

### Ошибки API Pterodactyl:
- Проверьте правильность токена
- Убедитесь, что панель доступна
- Проверьте права API токена

### Ошибки базы данных:
- Убедитесь, что папка `db/` существует
- Проверьте права на запись в папку

## 6. Логирование

Бот ведет подробные логи. Если что-то не работает:
1. Проверьте консоль на наличие ошибок
2. Ищите сообщения с уровнем ERROR
3. Проверьте логи Telegram API 